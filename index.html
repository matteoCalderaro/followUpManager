<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Follow-Up Manager</title>
    <link rel="icon" type="image/png" href="media/favicon.ico">
    
    <!-- GoogleFont LATO-->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    
    <!-- GoogleFont MONTSERRAT -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    
    <!-- CKEditor 5 Classic Build -->
    <script src="https://cdn.ckeditor.com/ckeditor5/41.4.2/classic/ckeditor.js"></script>
    
    <!-- My Style -->
    <link rel="stylesheet" href="style.css">
    
</head>
<body class="bgfm-secondary">
    
    <div class="container" style="margin-top: 80px;">
        
        <div class="d-flex align-items-center mb-4 gap-4">
            
            <img src="media/logo-bi.svg" width="50" alt="Another SVG icon">
            
            <div class="fs-2 text-primary title">Bi Network s.r.l</div>
        </div>
        
        
        <div class="bgfm-secondary-lighter rounded-3 mb-4 p-1 px-3">
            
            <div class="table-responsive">
                <table class="table fm-table" style="width: 100%;">
                    <thead>
                        <tr>
                            <th scope="col" class="fw-bold text-primary">Data visita</th>
                            <th scope="col" class="fw-bold text-primary">Commerciale</th>
                            <th scope="col" class="fw-bold text-primary">Tipo di interazione</th>
                            <th scope="col" class="fw-bold text-primary">Obiettivo visita</th>
                            <th scope="col" class="fw-bold text-primary"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>25/06/2025</td>
                            <td>Mauro Bianchi</td>
                            <td>Visita in presenza</td>
                            <td>Analisi campagne passate, presentazione nuove linee, raccolta brief</td>
                            <td class="text-end">
                                <i class="fas fa-cog icon-gradient me-3" style="cursor: pointer; font-size: 27px;" id="settingsIcon"></i> 
                                <i class="far fa-eye icon-gradient me-3" style="cursor: pointer; font-size: 27px;" onclick="openModal()"></i>
                                <i class="fas fa-headphones icon-gradient" style="cursor: pointer; font-size: 27px;" id="openAudioModalBtn"></i> 
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
        </div>
        
        <div id="timelineContainerWrapper" class="bgfm-secondary-lighter rounded-3 py-3 fade-toggable">
            <div id="timelineCard" class="d-flex align-items-end pe-4">
                <div class="text-white w-100 rounded-3">
                    <ul class="timeline">
                        <li class="my-4">
                            <div class="text-uppercase fw-bold text-primary">Prodotti richiesti / interessanti</div>
                            <div>- Gadget eco-friendly (bamboo, sughero)</div>
                            <div>- Powerbank con confezione regalo</div>
                            <div>- Gadget tech con NFC</div>
                        </li>
                        <li class="my-4">
                            <div class="text-uppercase fw-bold text-primary">Prossimo step</div>
                            <div>- Inviare kit demo entro 30/06</div>
                            <div>- Inviare preventivo personalizzato entro 03/07</div>
                            <div>- Follow-up post 05/07</div>
                        </li>
                        <li class="my-4">
                            <div class="text-uppercase fw-bold text-primary">Criticità emerse</div>
                            <div>Ritardi spedizioni marzo 2024</div>
                        </li>
                        <li>
                            <div class="text-uppercase fw-bold text-primary">Azioni correttive promesse</div>
                            <div>Verifica interna con logistica</div>
                        </li>
                    </ul>
                </div>
                <button id="avantiButton" class="button-gradient text-white" style="flex-shrink: 0;">Aggiungi note</button>
            </div>
        </div>
        
        <div id="ckeditorContainerWrapper" class="bgfm-secondary-lighter rounded-3 py-3 fade-toggable" style="display: none;">
            <div id="ckeditorCard" class="bgfm-secondary-lighter rounded-3 px-4">
                <div class="text-white mb-3 text-uppercase text-primary fw-bold">Aggiungi note personali</div>
                <textarea id="editor"></textarea>
                <div class="d-flex justify-content-end mt-3 gap-2">
                    <button id="saveNotesButton" class="button-gradient text-white" style="width: 70px;">Salva</button>
                    <button id="cancelNotesButton" class="button-gradient text-white" style="width: 70px;">Esci</button>
                </div>
            </div>
        </div>
        
    </div>

    <!-- Spinner Overlay -->
    <div id="spinnerOverlay">
        <div class="bar-spinner">
            <div class="loading-bar"></div>
            <div class="loading-bar"></div>
            <div class="loading-bar"></div>
            <div class="loading-bar"></div>
            <div class="loading-bar"></div>
        </div>
    </div>
    
    <!-- Transcription Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header d-flex justify-content-between">
                    <h5 class="modal-title fw-bold text-primary" id="errorModalLabel">Trascrizione dell'appuntamento (25/06/2025)</h5>
                    <button type="button" data-bs-dismiss="modal" aria-label="Close" id="modalCloseButton"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-body" style=" max-height: 50vh; overflow-y: auto;">
                    <p>Ok, riepilogo veloce sull'appuntamento di oggi con il Sig. Bianchi di Bi Network. È andata abbastanza bene direi. All'inizio l'ho lasciato parlare, volevo capire bene cosa cercano in questo momento per i gadget promozionali. Mi è parso subito chiaro che hanno una certa sensibilità verso l'ambiente, quindi l'eco-friendly è un must. E poi sono molto attenti a personalizzare le cose, non vogliono il solito gadget standard, ma qualcosa che parli del loro brand in modo unico.</p>
                    
                    <p>Ho tirato fuori la nuova linea in bamboo e sughero, e lì ho visto che gli occhi gli brillavano. Segno che sono sulla strada giusta con quei prodotti. Poi è venuto fuori il discorso dei powerbank... mi ha chiesto se ne facciamo con confezioni regalo, e anche di gadget tech con NFC. Questa cosa dell'NFC è interessante, significa che puntano a campagne più innovative, interattive. C'è potenziale lì, devo approfondire cosa intendono esattamente.</p>
                    
                    <p>C'è stato un punto un'po' delicato, ha tirato fuori dei ritardi nelle spedizioni che hanno avuto a marzo 2024. Non con noi, per fortuna, era con un fornitore precedente. Però si capisce che sono un'po' scottati. Ho cercato di rassicurarlo al massimo sulla nostra logistica interna, sulle garanzie di consegna, sui nostri controlli qualità. Gli ho promesso che facciamo una verifica interna approfondita anche se non ci riguarda direttamente, giusto per mostrare il nostro impegno. La trasparenza è fondamentale in questi casi.</p>
                    
                    <h5>Prossimi Passi:</h5>
                    <ul>
                        <li>Preparare e inviare il kit demo entro il 30/06.</li>
                        <li>Elaborare un preventivo personalizzato dettagliato entro il 03/07, con enfasi sui prodotti eco-friendly e NFC.</li>
                        <li>Effettuare un follow-up telefonico dopo il 05/07 per discutere il preventivo e rispondere a eventuali domande.</li>
                        <li>Garantire una comunicazione proattiva su eventuali aggiornamenti logistici.</li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-blue-dark text-white fw-bold text-uppercase"  style="width: 90px;" data-bs-dismiss="modal">OK</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio Player Modal -->
    <div class="modal fade" id="audioPlayerModal" tabindex="-1" aria-labelledby="audioPlayerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header d-flex justify-content-between align-items-center">
                    <h5 class="modal-title fw-bold text-primary text-uppercase" id="audioPlayerModalLabel">Ascolta Registrazione</h5>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-download icon-gradient me-3" style="cursor: pointer; font-size: 27px;" id="audioDownloadIcon"></i>
                        <button type="button" data-bs-dismiss="modal" aria-label="Close" id="audioModalCloseButton"><i class="fas fa-times"></i></button>
                    </div>
                </div>
                <div class="modal-body text-center">
                    <!-- 
                        IMPORTANT: Replace "media/speech.mp3" with the actual path
                        to the MP3 file you generated and placed in your "media/" directory.
                        e.g., src="media/appointment_summary.mp3"
                    -->
                    <audio id="audioPlayer" src="media/speech.mp3" preload="metadata"></audio>
                    
                    <div class="audio-player-controls d-flex flex-row justify-content-center">
                        <button id="playPauseBtn"><i class="fas fa-play"></i></button>
                        <div class="progress-container" id="progressContainer">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                        <span class="time-display" id="currentTime">0:00</span> / <span class="time-display" id="duration">0:00</span>
                    </div>
                </div>
                <!-- Modal Footer Removed -->
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <!-- script presto.it -->
    <script src="script.js"></script>
</body>
</html>